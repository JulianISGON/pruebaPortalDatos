serenity {
  project.name = "Automatizacion Portal Enlace"
  test.root = "enlace.screenplay"
  encoding = "UTF-8"

  # RUTAS RELATIVAS (Esto soluciona el error de ruta duplicada)
  # Forzamos a que use la ruta relativa del proyecto, no absoluta
  features.directory = "src/test/resources/features"
  requirements.dir = "src/test/resources/features"

  # Deshabilitar escaneo de requerimientos si no se necesita
  requirements.enabled = false

  # Configuración de credenciales
  enlace {
    url = "https://pruebasportaldatos.enlace.com.co/login"
    usuario = "pruebasqa@enlace.com.co"
    password = "Prueba1234567890*"
  }

  # Configuración de WebDriver
  webdriver {
    driver = chrome
    autodownload = true
    base.url = "https://pruebasportaldatos.enlace.com.co/login"
  }

  # Configuración de reportes
  take.screenshots = FOR_FAILURES
  logging = QUIET
  console.headings = NONE
  verbose.steps = false

  # Timeouts
  timeouts {
    implicitlywait = 10000
    fluentwait = 15000
  }
}

# Configuración de Chrome
webdriver {
  capabilities {
    browserName = "chrome"
    acceptInsecureCerts = false

    "goog:chromeOptions" {
      args = [
        "remote-allow-origins=*",
        "--start-maximized",
        "--disable-infobars",
        "--disable-notifications",
        "--no-sandbox",
        "--disable-dev-shm-usage"
      ]

      prefs {
        # IMPORTANTE: Usa una ruta relativa para descargas o asegúrate que esta ruta exista
        "download.default_directory" = "${user.dir}\\downloadsCSV"
        "download.prompt_for_download" = false
        "download.directory_upgrade" = true
        "safebrowsing.enabled" = false
      }
    }
  }
}